# This file contains all the commands to execute in the host and VMs for the different steps of the project

baseCLIforVM:
 - sudo lxc-attach --clear-env -n
setUpScenario:
 - wget http://idefix.dit.upm.es/cdps/pc2/pc2.tgz
 - sudo vnx --unpack pc2.tgz
prepareScenario:
 - bin/prepare-pc2-labo
runScenario:
 - sudo vnx -f pc2.xml --create
installDB:
 - apt update
 - apt -y install mariadb-server
 - sed -i -e 's/bind-address.*/bind-address=0.0.0.0/' -e 's/utf8mb4/utf8/' /etc/mysql/mariadb.conf.d/50-server.cnf
 - mysqladmin -u root password xxxx
 - mysql -u root --password='xxxx' -e \"CREATE USER 'quiz' IDENTIFIED BY 'xxxx';\"
 - mysql -u root --password='xxxx' -e \"CREATE DATABASE quiz;\"
 - mysql -u root --password='xxxx' -e \"GRANT ALL PRIVILEGES ON quiz.* to 'quiz'@'localhost' IDENTIFIED by 'xxxx';\"
 - mysql -u root --password='xxxx' -e \"GRANT ALL PRIVILEGES ON quiz.* to 'quiz'@'%' IDENTIFIED by 'xxxx';\"
 - mysql -u root --password='xxxx' -e \"FLUSH PRIVILEGES;\"

